# 线迹幻境

一个基于 Web 的随机线条生成工具，可以生成优雅的随机线条艺术，支持多平台无缝使用。

## 功能特点

- 自定义画布尺寸（默认 500x500px，支持快捷尺寸选择）
- 动态缩放控制（0.5x-3x）
- 背景颜色和透明度自定义
- 智能线条生成算法
  - 贯穿逻辑（起点/终点在画布相对两边）
  - 曲线模式（贝塞尔曲线）
  - 混合模式（直线与曲线比例调节）
- 高级参数控制
  - 线条数量（1-500条）
  - 宽度范围（0.5-20px）
  - 曲线强度控制（0-100%）
  - 端点样式选择（默认/圆角/混合）
- 高清导出功能
  - 支持 1x/2x/4x 超采样
  - 多种格式（PNG/JPG/SVG）
  - 跨平台保存支持（桌面/iOS/Android/微信）
- 完全响应式设计
  - 桌面端舒适操作
  - 移动端优化界面
  - 全面屏设备适配

## 代码结构

项目采用模块化结构，按功能拆分为独立的CSS和JS模块：

### CSS模块

```
css/
  ├── base.css        // 基础样式和变量定义
  ├── layout.css      // 布局相关样式
  ├── panel.css       // 控制面板样式
  ├── preview.css     // 预览区域样式
  ├── buttons.css     // 按钮和表单元素样式
  ├── modal.css       // 模态框样式
  └── main.css        // 主样式文件，导入所有模块
```

### JS模块

```
js/
  ├── utils.js             // 工具函数
  ├── canvas-manager.js    // 画布管理
  ├── line-generator.js    // 线条生成
  ├── export-manager.js    // 导出功能
  ├── touch-handler.js     // 触摸操作处理
  ├── ui-controller.js     // UI交互控制
  └── main.js              // 主入口，协调各模块
```

## 模块职责

### CSS模块

- **base.css**: 定义全局变量、基础样式和通用规则
- **layout.css**: 处理页面布局、顶部状态栏和容器结构
- **panel.css**: 控制面板样式和交互元素
- **preview.css**: 画布容器和预览区域样式
- **buttons.css**: 按钮和表单元素样式
- **modal.css**: 弹出层和对话框样式
- **main.css**: 导入并整合所有CSS模块

### JS模块

- **utils.js**: 提供通用工具函数和辅助方法
- **canvas-manager.js**: 管理画布尺寸、分辨率和显示
- **line-generator.js**: 负责线条的生成和绘制算法
- **export-manager.js**: 处理图像导出相关功能
- **touch-handler.js**: 处理移动设备上的触摸交互
- **ui-controller.js**: 处理用户界面交互和事件绑定
- **main.js**: 应用入口，初始化和协调各模块

## 使用方法

1. 打开应用（可通过浏览器直接访问）
2. 使用控制面板调整参数
   - 桌面端：左侧控制面板直接可见
   - 移动端：点击左上角菜单按钮展开控制面板
3. 实时预览线条效果
4. 点击「导出图片」按钮保存作品

## 跨平台保存功能

- **桌面端**：点击导出按钮直接下载图片文件
- **iOS设备**：自动打开优化的保存页面，长按图片即可保存到相册
- **Android设备**：支持直接下载或长按保存图片
- **微信/QQ浏览器**：特殊优化的保存页面，提供清晰的保存指引

## 图片保存指南

不同设备和浏览器保存图片的方式可能略有不同，以下是详细指南：

### iOS设备

1. 点击「导出图片」按钮
2. 在弹出的页面中**长按图片**
3. 选择「添加到照片」或「存储图像」
4. 如果长按无效，请点击「全屏查看」按钮后再尝试
5. 仍然无法保存时，可以使用截屏功能

### Android设备

1. 点击「导出图片」按钮
2. 如果图片自动下载，请在通知栏查看或进入下载文件夹
3. 如果未自动下载，长按显示的图片
4. 选择「保存图片」或「下载图片」选项
5. 部分浏览器可能需要先点击图片再长按

### 微信/QQ内置浏览器

1. 点击「导出图片」按钮
2. 在新页面中长按图片
3. 选择「保存图片」选项
4. 如遇到保存失败，请点击「全屏查看」按钮后再尝试
5. 或点击右上角「...」菜单，选择「在浏览器中打开」后保存

### SVG格式说明

- SVG格式在移动设备上可能无法直接保存
- iOS设备会提供「在新窗口查看SVG」选项
- 建议移动设备用户选择PNG或JPG格式
- 桌面设备可正常保存所有格式

## 技术栈

- HTML5 / CSS3 / JavaScript (ES6+)
- Canvas API
- 模块化设计
- 响应式布局
- 移动设备优化

## 开发原则

- 无依赖设计：不依赖任何第三方库
- 模块化结构：按功能分离，提高可维护性
- 响应式设计：自适应不同屏幕尺寸
- 高性能考虑：针对复杂画布操作进行优化
- 跨平台兼容：支持各种设备和浏览器

## 浏览器兼容性

- Chrome / Firefox / Safari / Edge 最新版本
- iOS Safari 10+
- Android Chrome 70+
- 微信/QQ内置浏览器 